// Code generated by catalog-gen. You may edit this file.
package {{.PackageName}}_test

import (
	"os"
	"testing"

	"github.com/kubeflow/model-registry/pkg/catalog/conformance"
)

// TestConformance runs the conformance suite against a running catalog server
// that has the {{.Name}} plugin loaded.
//
// Set CATALOG_SERVER_URL to the server base URL before running:
//
//	CATALOG_SERVER_URL=http://localhost:8080 go test ./tests/conformance/ -v -count=1
func TestConformance(t *testing.T) {
	serverURL := os.Getenv("CATALOG_SERVER_URL")
	if serverURL == "" {
		t.Skip("CATALOG_SERVER_URL not set, skipping conformance tests")
	}

	cfg := conformance.HarnessConfig{
		PluginName: "{{.Name}}",
		ServerURL:  serverURL,
		ExpectedEntityKinds: []string{ "{{.EntityName}}" },
		ExpectedCaps: conformance.ExpectedCaps{
			HasSources: true,
			HasActions: false,
			HasRefresh: true,
			HasUIHints: false,
		},
	}

	result := conformance.RunConformance(t, cfg)

	t.Logf("Conformance results: %d passed, %d failed, %d skipped",
		result.TotalPassed, result.TotalFailed, result.TotalSkipped)
}
