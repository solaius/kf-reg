openapi: 3.0.3
info:
  title: mcp Catalog API
  version: v1alpha1
  description: API for the mcp catalog service

servers:
  - url: /api/mcp_catalog/v1alpha1

paths:
  /mcpservers:
    get:
      summary: List McpServer entities
      operationId: listMcpServers
      parameters:
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 20
        - name: pageToken
          in: query
          schema:
            type: string
        - name: q
          in: query
          schema:
            type: string
          description: Search query
        - name: filterQuery
          in: query
          schema:
            type: string
          description: SQL-like filter expression (e.g., "protocol = 'http' AND toolCount > 5")
        - name: orderBy
          in: query
          schema:
            type: string
          description: Field to order results by
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
            default: ASC
          description: Sort direction
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/McpServerList'

  /mcpservers/{name}:
    get:
      summary: Get a McpServer by name
      operationId: getMcpServer
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/McpServer'
        '404':
          description: Not found

# You can add custom paths, parameters, and responses below.
# Schemas are defined in ./generated/components.yaml and merged via 'make api/openapi'.
# Use local $refs like '#/components/schemas/YourSchema' - they resolve after merge.

# Code generated by catalog-gen. DO NOT EDIT.
# To regenerate: catalog-gen generate
# Source: catalog.yaml
#
# Entity schemas are composed using allOf with BaseResource.
components:
  schemas:
    # Base schemas shared across all catalog entities
    BaseResource:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier
        name:
          type: string
          description: Resource name
        externalId:
          type: string
          description: External identifier
        description:
          type: string
          description: Resource description
        customProperties:
          type: object
          additionalProperties: true
          description: Custom properties
        createTimeSinceEpoch:
          type: string
          description: Creation timestamp
        lastUpdateTimeSinceEpoch:
          type: string
          description: Last update timestamp

    BaseResourceList:
      type: object
      properties:
        nextPageToken:
          type: string
          description: Token for next page
        size:
          type: integer
          description: Total size

    McpServer:
      allOf:
        - $ref: '#/components/schemas/BaseResource'
        - type: object
          required:
            - name
            - serverUrl

          properties:
            serverUrl:
              type: string
            transportType:
              type: string
            toolCount:
              type: integer
            resourceCount:
              type: integer
            promptCount:
              type: integer
            deploymentMode:
              type: string
            image:
              type: string
            endpoint:
              type: string
            supportedTransports:
              type: string
            license:
              type: string
            verified:
              type: boolean
            certified:
              type: boolean
            provider:
              type: string
            logo:
              type: string
            category:
              type: string
    McpServerList:
      allOf:
        - $ref: '#/components/schemas/BaseResourceList'
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/McpServer'

