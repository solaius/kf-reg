# mcp Catalog Plugin

This is a catalog plugin generated by catalog-gen for the unified catalog server.

## Overview

- **Entity**: McpServer
- **Package**: github.com/kubeflow/model-registry/catalog/plugins/mcp
- **API Base Path**: /api/mcp_catalog/v1alpha1

## Usage

### 1. Generate OpenAPI Handlers

```bash
make gen/openapi-server
```

### 2. Import the Plugin

Add the plugin import to `cmd/catalog-server/main.go`:

```go
import (
    // Import plugins - their init() registers them
    _ "github.com/kubeflow/model-registry/catalog/plugins/mcp"
)
```

### 3. Configure Sources

Add the plugin configuration to your `sources.yaml`:

```yaml
catalogs:
  mcp:
    sources:
      - id: "my-source"
        name: "My Data Source"
        type: "yaml"
        properties:
          yamlCatalogPath: "./data/mcpserver.yaml"
```

### 4. Build and Run

```bash
go build ./cmd/catalog-server
./catalog-server --sources=./sources.yaml --listen=:8080
```

## Filtering

List endpoints support advanced filtering via `filterQuery`:

```bash
# Filter by property
curl "http://localhost:8080/api/mcp_catalog/v1alpha1/mcpservers?filterQuery=name='example'"

# Multiple conditions
curl "http://localhost:8080/api/mcp_catalog/v1alpha1/mcpservers?filterQuery=name='example' AND name LIKE '%25server%25'"

# Pattern matching
curl "http://localhost:8080/api/mcp_catalog/v1alpha1/mcpservers?filterQuery=name LIKE '%25server%25'"

# Ordering
curl "http://localhost:8080/api/mcp_catalog/v1alpha1/mcpservers?orderBy=name&sortOrder=DESC"
```

Supported operators: `` = ``, `` != ``, `` > ``, `` < ``, `` >= ``, `` <= ``, `` LIKE ``, `` ILIKE ``, `` IN ``, `` AND ``, `` OR ``

Filterable properties: name, externalId

## Development

### Adding Properties

Edit `catalog.yaml` and run:

```bash
catalog-gen generate
```

### Adding Artifacts

```bash
catalog-gen add-artifact MyArtifact
```

## Files

| File | Description |
|------|-------------|
| `plugin.go` | Plugin implementation (auto-generated) |
| `register.go` | Plugin registration (auto-generated) |
| `internal/db/models/` | Entity models |
| `internal/db/service/` | Repository implementations |
| `internal/catalog/` | Data loader and providers |
| `internal/server/openapi/` | API handler implementations |
